<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles de Pago</title>
    <link rel="shortcut icon" href="icon/logo.png" type="image/png">
    <link rel="stylesheet" href="css/style_pago_detalles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <style>
        /* Estilos adicionales para Google Pay */
        #gpay-container {
            margin: 20px 0;
            text-align: center;
            min-height: 50px;
            display: none;
        }
        
        #gpay-container.active {
            display: block;
        }
        
        .pago-gpay-info {
            background: #f8f9fa;
            border: 2px dashed #4285f4;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        
        .pago-gpay-info h6 {
            color: #4285f4;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .pago-gpay-info p {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }
        
        .pago-success {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin: 15px 0;
            display: none;
        }
        
        .pago-success.active {
            display: block;
        }
        
        .pago-success i {
            font-size: 48px;
            color: #28a745;
            margin-bottom: 10px;
        }
        
        .pago-success h5 {
            color: #155724;
            margin: 10px 0;
        }
        
        .local-info {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }
        
        .local-info.active {
            display: block;
        }
        
        .local-info h6 {
            color: #1976d2;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .local-info p {
            margin: 5px 0;
            color: #0d47a1;
            font-size: 15px;
        }
        
        .local-info i {
            color: #2196f3;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    
<div class="contenedor pago-contenedor">
    <h1>Detalles de Pago</h1>

    <!-- Barra de progreso -->
    <div class="progress mb-4">
        <div class="progress-bar" role="progressbar" style="width: 33.33%;" id="progress-bar">Paso 1 de 3</div>
    </div>

    <!-- Step 1: Datos del Cliente -->
    <div class="paso active" id="step-1">
        <h3>Datos del Cliente</h3>
        <div class="fila">
            <div class="columna-6">
                <label for="nombre" class="etiqueta-formulario">Nombre</label>
                <input type="text" class="entrada-formulario" id="nombre" required>
            </div>
            <div class="columna-6">
                <label for="apellido" class="etiqueta-formulario">Apellido</label>
                <input type="text" class="entrada-formulario" id="apellido" required>
            </div>
            <div class="columna-6">
                <label for="correo" class="etiqueta-formulario">Correo</label>
                <input type="email" class="entrada-formulario" id="correo" required>
            </div>
            <div class="columna-6">
                <label for="telefono" class="etiqueta-formulario">Tel√©fono</label>
                <input type="tel" class="entrada-formulario" id="telefono" required pattern="[0-9]{9}" title="Tel√©fono debe tener 9 d√≠gitos num√©ricos">
            </div>
            <div class="columna-12">
                <label class="etiqueta-formulario">Tipo de Comprobante</label>
                <div>
                    <input type="radio" name="comprobante" id="boleta" value="boleta" checked>
                    <label for="boleta">Boleta</label>
                    <input type="radio" name="comprobante" id="factura" value="factura">
                    <label for="factura">Factura</label>
                </div>
            </div>
            <div class="columna-6" id="dni-container">
                <label for="dni" class="etiqueta-formulario">DNI</label>
                <input type="text" class="entrada-formulario" id="dni" required pattern="[0-9]{8}" title="DNI debe tener 8 d√≠gitos num√©ricos">
            </div>
            <div class="columna-6" id="ruc-container">
                <label for="ruc" class="etiqueta-formulario">RUC</label>
                <input type="text" class="entrada-formulario" id="ruc" pattern="[0-9]{11}" title="RUC debe tener 11 d√≠gitos num√©ricos">
            </div>
        </div>  
        <div class="info-container">
            <p>Guardamos tu correo electr√≥nico de manera 100% segura para:</p>
            <ul>
                <li>Identificar su perfil.</li>
                <li>Notificar sobre los estados de su compra.</li>
                <li>Guardar el historial de compras.</li>
                <li>Facilitar el proceso de compras.</li>
            </ul>
            <div class="botones">
                <a href="carrito.html" class="boton-confirmar"> <- Volver</a>
                <button class="boton-confirmar" onclick="nextStep(1)">Siguiente</button>
            </div>
        </div>
    </div>

    <!-- Step 2: M√©todo de Entrega -->
    <div class="paso d-none" id="step-2">
        <h3>M√©todo de Entrega</h3>
        <div class="fila">
            <div class="columna-12 info-entrega">
                <input type="radio" name="entrega" id="delivery" value="delivery" checked>
                <label for="delivery">Delivery (+ S/ 5.00)</label>
                <input type="radio" name="entrega" id="recoger" value="recoger">
                <label for="recoger">Recojo en Local</label>
            </div>
            
            <!-- Campos de direcci√≥n para delivery -->
            <div class="columna-6" id="direccion-container">
                <label for="direccion" class="etiqueta-formulario">Direcci√≥n</label>
                <input type="text" class="entrada-formulario" id="direccion" required>
            </div>
            <div class="columna-6" id="referencia-container">
                <label for="referencia" class="etiqueta-formulario">Referencia</label>
                <input type="text" class="entrada-formulario" id="referencia" required>
            </div>
            
            <!-- Informaci√≥n del local para recojo -->
            <div class="columna-12">
                <div class="local-info" id="local-info">
                    <h6><i class="bi bi-geo-alt-fill"></i> Ubicaci√≥n del Local</h6>
                    <p><strong>MegaPlaza Ica</strong></p>
                    <p>Av. de los Maestros, Ica</p>
                </div>
            </div>
        </div>
        <div class="info-container1">
            <div class="botones1">
                <button class="boton-confirmar" onclick="prevStep(2)">Atr√°s</button>
                <button class="boton-confirmar" onclick="nextStep(2)">Siguiente</button>
            </div>
        </div>
    </div>

    <!-- Step 3: M√©todo de Pago -->
    <div class="paso d-none" id="step-3">
        <h3>M√©todo de Pago</h3>
        <div class="fila">
            <div class="columna-12 info-entrega">
                <input type="radio" name="pago" id="tarjeta" value="tarjeta" checked>
                <label for="tarjeta">üí≥ Tarjeta</label>
                <input type="radio" name="pago" id="yape" value="yape">
                <label for="yape">üì± Yape</label>
            </div>
            
            <!-- Secci√≥n de Tarjeta con Google Pay -->
            <div class="columna-12" id="tarjeta-section">
                <!-- Informaci√≥n de Google Pay -->
                <div class="pago-gpay-info">
                    <h6><i class="bi bi-credit-card"></i> Pago con Google Pay</h6>
                    <p>Utiliza Google Pay para procesar tu pago de forma r√°pida y segura</p>
                    <p><strong>Monto Total: S/ <span id="monto-gpay">0.00</span></strong></p>
                </div>
                
                <!-- Contenedor del bot√≥n de Google Pay -->
                <div id="gpay-container"></div>
                
                <!-- Mensaje de √©xito -->
                <div id="pago-exitoso" class="pago-success">
                    <i class="bi bi-check-circle-fill"></i>
                    <h5>¬°Pago Procesado Exitosamente!</h5>
                    <p>Tu transacci√≥n ha sido completada con Google Pay</p>
                </div>
                
                <!-- Campos tradicionales de tarjeta (opcionales/fallback) -->
                <div id="campos-tarjeta-manual" style="margin-top: 20px;">
                    <p style="text-align: center; color: #666; margin-bottom: 15px;">
                        <small>O ingresa los datos de tu tarjeta manualmente</small>
                    </p>
                    <div class="fila">
                        <div class="columna-12 margen-abajo">
                            <label for="numero-tarjeta" class="etiqueta-formulario">N√∫mero de Tarjeta</label>
                            <input type="text" class="entrada-formulario" id="numero-tarjeta" 
                                   placeholder="1234-5678-9012-3456" maxlength="19">
                        </div>
                        <div class="columna-6 margen-abajo">
                            <label for="fecha-vencimiento" class="etiqueta-formulario">Fecha de Vencimiento</label>
                            <input type="text" class="entrada-formulario" id="fecha-vencimiento" 
                                   placeholder="MM/YY" maxlength="5">
                        </div>
                        <div class="columna-6 margen-abajo">
                            <label for="cvv" class="etiqueta-formulario">CVV</label>
                            <input type="text" class="entrada-formulario" id="cvv" maxlength="3">
                        </div>
                        <div class="columna-12 margin-abajo">
                            <label for="titular" class="etiqueta-formulario">Titular</label>
                            <input type="text" class="entrada-formulario" id="titular">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Secci√≥n de Yape -->
            <div class="columna-6 margen-abajo oculto" id="yape-numero-container">
                <label for="yape-numero" class="etiqueta-formulario">N√∫mero de Yape</label>
                <input type="text" class="entrada-formulario" id="yape-numero">
            </div>
            <div class="columna-6 margen-abajo oculto" id="yape-codigo-container">
                <label for="yape-codigo" class="etiqueta-formulario">C√≥digo de Operaci√≥n</label>
                <input type="text" class="entrada-formulario" id="yape-codigo">
            </div>
        </div>
        <div class="info-container">
            <p class="tamano-fuente-4">Subtotal: S/ <span id="subtotal">0.00</span></p>
            <p class="tamano-fuente-4">Costo de Delivery: S/ <span id="delivery-cost">5.00</span></p>
            <p class="tamano-fuente-4">Total: S/ <span id="total">0.00</span></p>
            <div class="botones">
                <button class="boton-confirmar" onclick="prevStep(3)">Atr√°s</button>
                <button id="btn-procesar" class="boton-confirmar">Procesar Pago</button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>

<!-- Google Pay SDK -->
<script async src="https://pay.google.com/gp/p/js/pay.js" onload="onGooglePayLoaded()"></script>

<!-- Script del sistema de pago -->
<script src="js/pago_detalles.js"></script>
</body>
</html>